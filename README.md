# rouge

rogue는 대부분의 요소가 랜덤으로 진행되는 콘솔기반 RPG게임이다. 맵에서 최대한 많이 금을 모아 출구로 나가면 된다.

캐릭터 - @
몬스터 - 알파벳
금 - %
출구 ^

rogue는 절차적 생성이라는 방법을 사용해서 매번 맵을 다르게 한다.

 따라서 맵을 외워서 플레이할수없고, 항상 어느정도의 운에 기대야한다.

### 구현된 기능
- 절차적 생성 알고리즘을 이용한 랜덤 맵 생성
- 기본적 전투(일방향), 던전탈출
- 금수집
- 몬스터, 몬스터 인공지능

### 프로젝트 구조
```
include/
- findpath.h - 길찾기알고리즘&우선순위큐
- inventory.h - 인벤토리
- item.h - 아이템 데치터
- map.h - 맵 자동생성 & 업데이트
- monster.h - 몬스터 인공지능,
- util.h - 기타 쓸만한 함수들
- vector.h - 동적 크기 배열
src/
- 위 헤더에 대한 구현
- main.c
```

### 세부적인것들

#### main.c

기본적인초기화, 몹생성과

다음과 같은 루프를 구성한다.

player_info()
print_map()
move()
attack() - 실질적인 판정

#### findpath.c

- pq_create() - 우선순위 큐 노드 생성
- pq_destroy() - 노드 할당 해제
- pq_enque() - 힙 트리 구성
- pq_swap_node() - 두노드를 서로 바꾼다.
- pq_dequqeue() -  힙트리에서 최소값을 뺀다.
- huristic() - A*알고리즘에서 휴리스틱 값을 구하는 함수(맨해튼 거리)
- findpath() - 각 방에 존재하는 문을 다른 방의 문과 잇기위해 A*알고리즘을 이용해 최단거리를 구한다.(힙트리기반)

#### map.c
- updateParam() - 방의 최대 개수 수정.
- allocate_room() - 방 구조체를 하나 생성한다.
- initRooms() - 방 구조체 초기화
- isBlock() 방이 유효한지 확인한다.
- drawRoom() - 방 구조체를 참고해 실제로 방을 2차원 배열상에 그린다.
- generate_map() -  위 함수들을 묶어 하나의 맵을 생성한다.
- print_map() - 맵을 표현한다.

#### monster.c
- is_block() - 현재 블럭이 통과가능한지 검사한다.
- huristic() - findpath.c의 huristic함수와 비슷하지만, 인자로 player구조체를 받는다.
- create_monster() - 몬스터를 생성하고 맵에 배치한다.
- deal() - 전투에서 데미지 교환을 처리한다.
- attack() - 거리에 따른 몬스터의 활동을 처리한다.
- monster_findpath() - A* 알고리즘에서 범위를 단축시켜 각 턴마다 플레이어에게 가는 경로를 구해서 한칸 이동한다.
- is_player_near() - (이름이..) 현재 몬스터와 플레이어의 거리를 구한다.

#### player.c
- player_init() - 플래이어 구조체를 초기화하고 랜덤한 방에 배치한다.
- player_info() - 상단에 플레이어의 상태를 나타낸다.
- collect() - 금을 줍는다.
- player_move() - 플레이어의 이동과 아이템줍기등의 활동을 처리한다.


### 구현&수정할것
- 게임오버
- 맵생성 알고리즘 수정
- 인벤토리
- 아이템 수집
- 다음 던전으로 넘어가기
- 레벨업
- 불필요한 코드 제거, 메모리 누수 해결
